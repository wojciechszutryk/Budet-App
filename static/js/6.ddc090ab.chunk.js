(this["webpackJsonpBudet-App"]=this["webpackJsonpBudet-App"]||[]).push([[6],{267:function(n,e){},269:function(n,e){},270:function(n,e){},288:function(n,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return M}));var r,i,c,o,a,l,d=t(8),s=t(0),u=t(265),f=t.n(u),b=t(1),p=function(n){var e=function(n){n.stopPropagation(),n.preventDefault()};return Object(b.jsx)("div",{onDrop:function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;t&&t[0]&&n.handleFile(t[0])},onDragEnter:e,onDragOver:e,children:n.children})},g=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(n){return"."+n})).join(","),h=t(4),j=t(3),x=j.c.ul(r||(r=Object(h.a)(['\n  margin-left: 23px;\n  & li::before {\n    content: "\\2022";\n    color: ',";\n    font-weight: bold;\n    display: inline-block;\n    width: 1em;\n    margin-left: -1em;\n  }\n"],['\n  margin-left: 23px;\n  & li::before {\n    content: "\\\\2022";\n    color: ',";\n    font-weight: bold;\n    display: inline-block;\n    width: 1em;\n    margin-left: -1em;\n  }\n"])),(function(n){return n.theme.colors.orange.dark})),m=j.c.span(i||(i=Object(h.a)(["\n  font-weight: 600;\n  color: ",";\n"])),(function(n){return n.theme.colors.orange.dark})),O=j.c.label(c||(c=Object(h.a)(["\n  position:absolute;\n  min-width:200px;\n  text-align:center;\n  top: 19px;\n  left: 80px;\n  font-weight: 600;\n"]))),v=j.c.input(o||(o=Object(h.a)(["\n  margin-top: 25px;\n  margin-left: 14px;\n  width: 262px;\n  height: 100px;\n  border: 2px solid black;\n  background-color: #ccc;\n"]))),y=j.c.span(a||(a=Object(h.a)(["\n  display: block;\n  width: 290px;\n  text-align: center\n"]))),w=j.c.div(l||(l=Object(h.a)(["\n  position: absolute;\n  left: 30px;\n  top: 20px;\n  height: 16px;\n  width: 40px;\n  background-color: #ddd;\n  border: 2px solid black;\n  border-radius: 4px;\n  line-height:12px;\n  font-size: 12px;\n  & div{\n    display: none;\n  }\n  & div p{\n    margin-top: 5px;\n  }\n  & div p:last-child{\n    font-weight: 600;\n  }\n  \n  &:hover div {\n    z-index: 1;\n    display: block;\n    margin-top: 11px;\n    margin-left: -13px;\n    width: 262px;\n    height: 100px;\n    padding: 10px;\n    border: 2px solid black;\n    background-color: #fff;\n  }\n"]))),k=t(263),C=function(n){var e=Object(k.a)().t;return Object(b.jsx)("form",{className:"form-inline",children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)(O,{htmlFor:"file",children:e("Import from file")}),Object(b.jsxs)(w,{children:["INFO",Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[e("Select file with available file extension.\nPreferred format .xlsx\nFile should contain columns in order"),":"]}),Object(b.jsx)("p",{children:e("Description | Amount | Date | Category")})]})]}),Object(b.jsx)(v,{type:"file",id:"file",accept:g,onChange:function(e){var t=e.target.files;t&&t[0]&&n.handleFile(t[0])}})]})})},I=t(17),S=t(15),N=t(19),A=t(78),B=t(264),F=t(20),D=t(9),_=Object(N.b)((function(n){return{activeBudget:n.common.activeBudget,userId:n.common.userId,otherCategoryId:n.budget.otherCategoryId}}))((function(n){var e=n.data,t=n.budgetCategories,r=n.allCategories,i=n.activeBudget,c=n.otherCategoryId,o=n.userId,a=Object(k.a)().t,l=Object(A.b)(),d=t.budgetCategories.map((function(n){return Object(I.a)(Object(I.a)({},n),r.find((function(e){return n.categoryId===e.id})))})),u=Object(s.useMemo)((function(){return e.map((function(n){if(n.length>=4){var e=n.map((function(e){return"number"!==typeof e||Number.isNaN(e)?null:n.indexOf(e)})).find((function(n){return null!==n}));if(e&&"string"===typeof n[e-1]&&"string"===typeof n[e+1]&&"string"===typeof n[e+2]){var t=d.find((function(t){return t.name===n[e+2]}));t=t?t.categoryId:c;var r=n[e+1].substring(0,10).replaceAll(".","-").split("-"),i=r.find((function(n){return 4===n.length})),o=r.find((function(n){return 2===n.length})),a=i+"-"+r.reverse().find((function(n){return 2===n.length}))+"-"+o;return{categoryId:t.toString(),date:a,description:n[e-1].toString(),amount:n[e]}}}return null})).filter((function(n){return null!==n}))}),[d,e,c]),f=Object(s.useMemo)((function(){return u.length}),[u.length]),p=Object.entries(u).map((function(n){return Object(b.jsx)("li",{children:n[1].description},n[1].id+n[1].description+n[1].amount*Math.random())})),g=f>7?p.slice(0,7):p,h=Object(B.a)(D.a.budget.addTransition);return Object(b.jsxs)("div",{children:[Object(b.jsxs)(y,{children:[a("Successfully read "),Object(b.jsx)(m,{children:f})," ".concat(a("transactions")).concat(f>7?" ".concat(a("(first 7)"),":"):":")]}),Object(b.jsx)(x,{children:g}),Object(b.jsx)(S.i,{disabled:0===f,onClick:function(){u.forEach((function(n){n.budgetId=i.toString(),n.userId=o,h.mutate({data:n},{onSuccess:function(){l.refetchQueries()}})})),Object(F.b)("Succeeded in adding Transactions")},children:f>0?a("add")+" "+f+" "+a("transactions"):a("Attach correct file")})]})})),M=function(n){var e=n.budgetCategories,t=n.allCategories,r=Object(s.useState)([]),i=Object(d.a)(r,2),c=i[0],o=i[1],a=Object(s.useState)([]),l=Object(d.a)(a,2),u=l[0],g=l[1],h=function(n){var e=new FileReader,t=!!e.readAsBinaryString;e.onload=function(n){var e=n.target.result,r=f.a.read(e,{type:t?"binary":"array"}),i=r.SheetNames[0],c=r.Sheets[i],a=f.a.utils.sheet_to_json(c,{header:1});g(function(n){for(var e=[],t=f.a.utils.decode_range(n).e.c+1,r=0;r<t;++r)e[r]={name:f.a.utils.encode_col(r),key:r};return e}(c["!ref"])),o(a)},t?e.readAsBinaryString(n):e.readAsArrayBuffer(n)};return Object(b.jsxs)(p,{handleFile:h,children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-xs-12",children:Object(b.jsx)(C,{handleFile:h})})}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-xs-12",children:Object(b.jsx)(_,{budgetCategories:e,allCategories:t,data:c,cols:u})})})]})}}}]);
//# sourceMappingURL=6.ddc090ab.chunk.js.map