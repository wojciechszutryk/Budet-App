{"version":3,"sources":["RoutePages/components/addBudgetCategoriesForm/addBudgetCategoriesFormStyles.js","RoutePages/components/addBudgetCategoriesForm/addBudgetCategoriesForm.js"],"names":["BudgetName","styled","span","theme","colors","orange","dark","BudgetAmount","OtherMoney","div","spacing","normal","AddBudgetCategoriesForm","name","totalAmount","categories","onSubmit","useState","budgetCategoriesFounds","setBudgetCategoriesFounds","budgetOvervaluedError","setBudgetOvervaluedError","otherCategoriesFounds","setOtherCategoriesFounds","redirect","setRedirect","t","useTranslation","history","useHistory","useMemo","totalCurrentCategoriesFounds","Object","entries","forEach","category","inputs","document","querySelectorAll","i","length","value","categoriesFoundsList","map","type","onChange","e","id","categoryFounds","parseInt","target","handleFoundsChange","label","push","window","location","reload","setCurrency","to","buttonType","disabled","onClick","getElementById","reset"],"mappings":"sOAEaA,EAAaC,IAAOC,KAAV,iEAEZ,qBAAEC,MAAiBC,OAAOC,OAAOC,QAE/BC,EAAeN,IAAOC,KAAV,kEAIZM,EAAaP,IAAOQ,IAAV,iEAEP,qBAAEN,MAAiBO,QAAQC,U,+BCwG5BC,EA5GiB,SAAC,GAAkD,IAAjDC,EAAgD,EAAhDA,KAAMC,EAA0C,EAA1CA,YAA0C,IAA7BC,kBAA6B,MAAlB,GAAkB,EAAdC,EAAc,EAAdA,SAChE,EAA4DC,mBAAS,IAArE,mBAAOC,EAAP,KAA+BC,EAA/B,KACA,EAA0DF,oBAAS,GAAnE,mBAAOG,EAAP,KAA8BC,EAA9B,KACA,EAA0DJ,mBAASH,GAAnE,mBAAOQ,EAAP,KAA8BC,EAA9B,KACA,EAAgCN,oBAAS,GAAzC,mBAAOO,EAAP,KAAiBC,EAAjB,KACOC,EAAKC,cAALD,EACHE,EAAUC,cAEdC,mBAAQ,WACCjB,GAASC,GAAaW,GAAY,KACzC,CAACZ,EAAMC,IAETgB,mBAAQ,WACJ,IAAIC,EAA+B,EACnCC,OAAOC,QAAQf,GAAwBgB,SAAQ,SAAAC,GAC3CJ,GAAgCI,EAAS,MAEAd,EAA7CU,EAA+BjB,GAC/BkB,OAAOC,QAAQf,GAAwBgB,SAAQ,SAAAC,GACtCA,EAAS,IAAsB,IAAhBA,EAAS,IAAUd,GAAyB,MAGpE,IADA,IAAMe,EAASC,SAASC,iBAAiB,SAChCC,EAAI,EAAGA,EAAIH,EAAOI,OAAQD,IACR,KAApBH,EAAOG,GAAGE,OACTpB,GAAyB,GAGjCE,EAAyBT,EAAYiB,GAChChB,GAAoC,IAAtBA,EAAWyB,QAAcnB,GAAyB,KACvE,CAACH,EAAwBH,EAAYD,IAEvC,IAwBM4B,EAAuB3B,EAAW4B,KAAI,SAAAR,GACxC,OACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAWS,KAAK,SAASC,SAAU,SAACC,GAAD,OAjBpB,SAACC,EAAID,GAC5B,IAAME,EAAiB,GACvBA,EAAeD,GAAIE,SAASH,EAAEI,OAAOT,OACrCtB,EAA0B,2BAAID,GAA2B8B,IAcPG,CAAmBhB,EAASM,MAAOK,MAC7E,cAAC,IAAD,UAAQX,EAASiB,UAFLjB,EAASM,UAOjC,OACIjB,GAjCAI,EAAQyB,KAAK,gBACbC,OAAOC,SAASC,UAiChB,qCACI,cAACxD,EAAD,UAAaa,IACb,qCAAQa,EAAE,aACV,gCACI,iCAAOA,EAAE,iBAAT,QACA,cAACnB,EAAD,UAAekD,YAAY3C,QAG/B,uBAAMiC,GAAG,uBAAT,UACI,8BACKL,IAEL,eAAClC,EAAD,WACI,iCAAOkB,EAAE,SAAT,OADJ,IAEKJ,EAAwB,EACrB,cAACf,EAAD,UAAekD,YAAYnC,KACzB,cAACtB,EAAD,UAAayD,YAAYnC,QAEnC,gCACI,cAAC,IAAD,CAAMoC,GAAG,UAAT,SACI,cAAC,IAAD,CACIC,WAAW,SACXf,KAAK,SACLgB,SAAUxC,EACVyC,QA3CH,WACjB7C,EAAS,CACLH,OACAC,cACAC,WAAYG,KAmCA,SAMKQ,EAAE,cAGX,cAAC,IAAD,CACIiC,WAAW,QACXf,KAAK,SACLiB,QA9DF,WACdxB,SAASyB,eAAe,wBAAwBC,QAChDxC,EAAyBT,IAyDb","file":"static/js/8.7ebddde3.chunk.js","sourcesContent":["import styled from 'styled-components';\r\n\r\nexport const BudgetName = styled.span`\r\n  font-weight: 600;\r\n  color: ${({theme}) => theme.colors.orange.dark};;\r\n`;\r\nexport const BudgetAmount = styled.span`\r\n  font-weight: 600;\r\n  color: black;\r\n`;\r\nexport const OtherMoney = styled.div`\r\n  color: red;\r\n  margin-top: ${({theme}) => theme.spacing.normal}px;\r\n`;","import React, {useState, useMemo} from 'react'\r\nimport {FormField, FormGroup, Label} from \"components/Input/InputStyles\";\r\nimport {Button} from \"components\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {BudgetAmount, BudgetName, OtherMoney} from \"./addBudgetCategoriesFormStyles\";\r\nimport {setCurrency} from \"utilities/functions\";\r\nimport {Link, useHistory } from \"react-router-dom\";\r\n\r\nconst AddBudgetCategoriesForm = ({name, totalAmount, categories=[], onSubmit}) => {\r\n    const [budgetCategoriesFounds, setBudgetCategoriesFounds] = useState({});\r\n    const [budgetOvervaluedError, setBudgetOvervaluedError] = useState(true);\r\n    const [otherCategoriesFounds, setOtherCategoriesFounds] = useState(totalAmount);\r\n    const [redirect, setRedirect] = useState(false);\r\n    const {t} = useTranslation();\r\n    let history = useHistory();\r\n\r\n    useMemo(() =>{\r\n        if (!name || !totalAmount) setRedirect(true);\r\n    },[name, totalAmount]);\r\n\r\n    useMemo(() => {\r\n        let totalCurrentCategoriesFounds = 0;\r\n        Object.entries(budgetCategoriesFounds).forEach(category => {\r\n            totalCurrentCategoriesFounds += category[1];\r\n        });\r\n        totalCurrentCategoriesFounds > totalAmount ? setBudgetOvervaluedError(true) : setBudgetOvervaluedError(false);\r\n        Object.entries(budgetCategoriesFounds).forEach(category => {\r\n            if (!category[1] || category[1] === 0) setBudgetOvervaluedError(true);\r\n        });\r\n        const inputs = document.querySelectorAll('input');\r\n        for (let i = 0; i < inputs.length; i++) {\r\n            if(inputs[i].value === \"\"){\r\n                setBudgetOvervaluedError(true);\r\n            }\r\n        }\r\n        setOtherCategoriesFounds(totalAmount-totalCurrentCategoriesFounds);\r\n        if (!categories || categories.length === 0) setBudgetOvervaluedError(false);\r\n    },[budgetCategoriesFounds, categories, totalAmount])\r\n\r\n    const handleError = () => {\r\n        history.push('/budget');\r\n        window.location.reload();\r\n    }\r\n\r\n    const resetForm = () => {\r\n        document.getElementById(\"budgetCategoriesForm\").reset();\r\n        setOtherCategoriesFounds(totalAmount);\r\n    };\r\n\r\n    const handleFoundsChange = (id, e) => {\r\n        const categoryFounds = {}\r\n        categoryFounds[id]=parseInt(e.target.value);\r\n        setBudgetCategoriesFounds({...budgetCategoriesFounds, ...categoryFounds});\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        onSubmit({\r\n            name,\r\n            totalAmount,\r\n            categories: budgetCategoriesFounds,\r\n        });\r\n    };\r\n\r\n    const categoriesFoundsList = categories.map(category => {\r\n        return(\r\n            <FormGroup key={category.value}>\r\n                <FormField type=\"number\" onChange={(e) => handleFoundsChange(category.value, e)}/>\r\n                <Label>{category.label}</Label>\r\n            </FormGroup>\r\n        )\r\n    });\r\n\r\n    return(\r\n        redirect ? handleError() :\r\n        <>\r\n            <BudgetName>{name}</BudgetName>\r\n            <span> {t('Founds')}</span>\r\n            <div>\r\n                <span>{t('Budget Amount')}: </span>\r\n                <BudgetAmount>{setCurrency(totalAmount)}</BudgetAmount>\r\n            </div>\r\n\r\n            <form id=\"budgetCategoriesForm\">\r\n                <div>\r\n                    {categoriesFoundsList}\r\n                </div>\r\n                <OtherMoney>\r\n                    <span>{t('Other')} </span>:\r\n                    {otherCategoriesFounds > 0 ?\r\n                        <BudgetAmount>{setCurrency(otherCategoriesFounds)}</BudgetAmount>\r\n                        : <BudgetName>{setCurrency(otherCategoriesFounds)}</BudgetName>}\r\n                </OtherMoney>\r\n                <div>\r\n                    <Link to='/budget'>\r\n                        <Button\r\n                            buttonType='submit'\r\n                            type='submit'\r\n                            disabled={budgetOvervaluedError}\r\n                            onClick={handleSubmit}\r\n                        >\r\n                            {t('Submit')}\r\n                        </Button>\r\n                    </Link>\r\n                    <Button\r\n                        buttonType=\"reset\"\r\n                        type=\"button\"\r\n                        onClick={resetForm}\r\n                    >\r\n                        Reset\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default AddBudgetCategoriesForm;"],"sourceRoot":""}