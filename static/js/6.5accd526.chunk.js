(this["webpackJsonpBudet-App"]=this["webpackJsonpBudet-App"]||[]).push([[6],{275:function(n,e){},277:function(n,e){},278:function(n,e){},296:function(n,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return _}));var i,r,c,a,o,l,s=t(28),d=t(0),u=t(273),f=t.n(u),p=t(1),b=function(n){var e=function(n){n.stopPropagation(),n.preventDefault()};return Object(p.jsx)("div",{onDrop:function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;t&&t[0]&&n.handleFile(t[0])},onDragEnter:e,onDragOver:e,children:n.children})},h=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(n){return"."+n})).join(","),g=t(4),j=t(3),x=j.c.ul(i||(i=Object(g.a)(['\n  margin-left: 23px;\n  & li::before {\n    content: "\\2022";\n    color: ',";\n    font-weight: bold;\n    display: inline-block;\n    width: 1em;\n    margin-left: -1em;\n  }\n"],['\n  margin-left: 23px;\n  & li::before {\n    content: "\\\\2022";\n    color: ',";\n    font-weight: bold;\n    display: inline-block;\n    width: 1em;\n    margin-left: -1em;\n  }\n"])),(function(n){return n.theme.colors.orange.dark})),m=j.c.span(r||(r=Object(g.a)(["\n  font-weight: 600;\n  color: ",";\n"])),(function(n){return n.theme.colors.orange.dark})),O=j.c.label(c||(c=Object(g.a)(["\n  position:absolute;\n  min-width:200px;\n  text-align:center;\n  top: 19px;\n  left: 80px;\n  font-weight: 600;\n"]))),v=j.c.input(a||(a=Object(g.a)(["\n  margin-top: 25px;\n  margin-left: 14px;\n  width: 262px;\n  height: 100px;\n  border: 2px solid black;\n  background-color: #ccc;\n"]))),y=j.c.span(o||(o=Object(g.a)(["\n  display: block;\n  width: 290px;\n  text-align: center\n"]))),w=j.c.div(l||(l=Object(g.a)(["\n  position: absolute;\n  left: 30px;\n  top: 20px;\n  height: 16px;\n  width: 40px;\n  background-color: #ddd;\n  border: 2px solid black;\n  border-radius: 4px;\n  line-height:12px;\n  font-size: 12px;\n  & div{\n    display: none;\n  }\n  & div p{\n    margin-top: 5px;\n  }\n  & div p:last-child{\n    font-weight: 600;\n  }\n  \n  &:hover div {\n    z-index: 1;\n    display: block;\n    margin-top: 11px;\n    margin-left: -13px;\n    width: 262px;\n    height: 100px;\n    padding: 10px;\n    border: 2px solid black;\n    background-color: #fff;\n  }\n"]))),k=t(271),S=function(n){var e=Object(k.a)().t;return Object(p.jsx)("form",{className:"form-inline",children:Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)(O,{htmlFor:"file",children:e("Import from file")}),Object(p.jsxs)(w,{children:["INFO",Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:[e("Select file with available file extension.\nPreferred format .xlsx\nFile should contain columns in order"),":"]}),Object(p.jsx)("p",{children:e("Description | Amount | Date | Category")})]})]}),Object(p.jsx)(v,{type:"file",id:"file",accept:h,onChange:function(e){var t=e.target.files;t&&t[0]&&n.handleFile(t[0])}})]})})},N=t(17),A=t(12),C=t(22),B=t(83),F=t(272),D=t(13),I=Object(C.b)((function(n){return{activeBudget:n.common.activeBudget}}))((function(n){var e=n.data,t=n.addTransition,i=n.budgetCategories,r=n.allCategories,c=n.activeBudget,a=Object(k.a)().t,o=Object(B.b)(),l=i.map((function(n){return Object(N.a)(Object(N.a)({},n),r.find((function(e){return n.categoryId===e.id})))})),s=Object(d.useMemo)((function(){return e.map((function(n){if(n.length>=4){var e=n.map((function(e){return"number"!==typeof e||Number.isNaN(e)?null:n.indexOf(e)})).find((function(n){return null!==n}));if(e&&"string"===typeof n[e-1]&&"string"===typeof n[e+1]&&"string"===typeof n[e+2]){var t=l.find((function(t){return t.name===n[e+2]}));t=t?t.categoryId:0;var i=n[e+1].substring(0,10).replaceAll(".","-").split("-"),r=i.find((function(n){return 4===n.length})),c=i.find((function(n){return 2===n.length})),a=r+"-"+i.reverse().find((function(n){return 2===n.length}))+"-"+c;return{categoryId:t.toString(),date:a,description:n[e-1].toString(),amount:n[e]}}}return null})).filter((function(n){return null!==n}))}),[l,e]),u=Object(d.useMemo)((function(){return s.length}),[s.length]),f=Object.entries(s).map((function(n){return Object(p.jsx)("li",{children:n[1].description},n[1].id+n[1].description+n[1].amount*Math.random())})),b=u>7?f.slice(0,7):f,h=Object(F.a)(t,{onSuccess:function(){o.invalidateQueries("budget")}});return Object(p.jsxs)("div",{children:[Object(p.jsxs)(y,{children:[a("Successfully read "),Object(p.jsx)(m,{children:u})," ".concat(a("transactions")).concat(u>7?" ".concat(a("(first 7)"),":"):":")]}),Object(p.jsx)(x,{children:b}),Object(p.jsx)(A.i,{disabled:0===u,onClick:function(){s.forEach((function(n){return h.mutate({budgetId:c.toString(),data:n})})),Object(D.b)("Succeeded in adding Transactions")},children:u>0?a("add")+" "+u+" "+a("transactions"):a("Attach correct file")})]})})),_=function(n){var e=n.budgetCategories,t=n.allCategories,i=Object(d.useState)([]),r=Object(s.a)(i,2),c=r[0],a=r[1],o=Object(d.useState)([]),l=Object(s.a)(o,2),u=l[0],h=l[1],g=function(n){var e=new FileReader,t=!!e.readAsBinaryString;e.onload=function(n){var e=n.target.result,i=f.a.read(e,{type:t?"binary":"array"}),r=i.SheetNames[0],c=i.Sheets[r],o=f.a.utils.sheet_to_json(c,{header:1});h(function(n){for(var e=[],t=f.a.utils.decode_range(n).e.c+1,i=0;i<t;++i)e[i]={name:f.a.utils.encode_col(i),key:i};return e}(c["!ref"])),a(o)},t?e.readAsBinaryString(n):e.readAsArrayBuffer(n)};return Object(p.jsxs)(b,{handleFile:g,children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-xs-12",children:Object(p.jsx)(S,{handleFile:g})})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-xs-12",children:Object(p.jsx)(I,{budgetCategories:e,allCategories:t,data:c,cols:u})})})]})}}}]);
//# sourceMappingURL=6.5accd526.chunk.js.map